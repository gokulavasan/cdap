<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Cask Data, Inc." name="author" />
<meta content="Copyright © 2014 Cask Data, Inc." name="copyright" />
<script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-55081520-2']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <title>Realtime Data Processing with a Flow &mdash; Cask Data Application Platform 2.5.2 Documentation</title>
    
    <link rel="stylesheet" href="../_static/cdap.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    



    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.5.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Cask Data Application Platform 2.5.2 Documentation" href="../index.html" />
    <link rel="up" title="How-To Guides" href="index.html" />
    <link rel="next" title="Ingesting Data into CDAP using Apache Flume" href="cdap-flume-guide.html" />
    <link rel="prev" title="How-To Guides" href="index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">Index</a></li>
        <li class="right" >
          <a href="cdap-flume-guide.html" title="Ingesting Data into CDAP using Apache Flume"
             accesskey="N">Next</a> |</li>
        <li class="right" >
          <a href="index.html" title="How-To Guides"
             accesskey="P">Previous</a> |</li>
        <li><a href="../table-of-contents.html">CDAP Examples, Guides, and Tutorials</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">How-To Guides</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="realtime-data-processing-with-a-flow">
<span id="cdap-flow-guide"></span><h1>Realtime Data Processing with a Flow<a class="headerlink" href="#realtime-data-processing-with-a-flow" title="Permalink to this headline">¶</a></h1>
<blockquote class="pull-quote">
<div><strong>Source Code Repository:</strong> Source code (and other resources) for this guide are available at the
<a class="reference external" href="https://github.com/cdap-guides/cdap-flow-guide">CDAP Guides GitHub repository</a>.</div></blockquote>
<p>In this guide you will learn how to process data in realtime with the
Cask Data Application Platform (CDAP). You will also learn how easy it
is to scale out realtime data processing applications on CDAP.</p>
<div class="section" id="what-you-will-build">
<h2>What You Will Build<a class="headerlink" href="#what-you-will-build" title="Permalink to this headline">¶</a></h2>
<p>You will build a CDAP application that processes disk usage information
across machines in a large company in order to identify disks that may
need to be replaced soon. You will:</p>
<ul class="simple">
<li>Build a
<a class="reference external" href="http://docs.cdap.io/cdap/current/en/developers-manual/building-blocks/flows-flowlets/flows.html">Flow</a>
to process disk usage data in realtime;</li>
<li>Use
<a class="reference external" href="http://docs.cdap.io/cdap/current/en/developers-manual/building-blocks/datasets/index.html">Datasets</a>
to store the number of slow reads per disk and track slow disks that
may need to be replaced soon; and</li>
<li>Build a
<a class="reference external" href="http://docs.cdap.io/cdap/current/en/developers-manual/building-blocks/services.html">Service</a>
to query via HTTP which slow disks should be replaced.</li>
</ul>
</div>
<div class="section" id="what-you-will-need">
<h2>What You Will Need<a class="headerlink" href="#what-you-will-need" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">JDK 6 or JDK
7</a></li>
<li><a class="reference external" href="http://maven.apache.org/download.cgi">Apache Maven 3.0+</a></li>
<li><a class="reference external" href="http://docs.cdap.io/cdap/current/en/developers-manual/getting-started/standalone/index.html">CDAP
SDK</a></li>
</ul>
</div>
<div class="section" id="lets-build-it">
<h2>Let’s Build It!<a class="headerlink" href="#lets-build-it" title="Permalink to this headline">¶</a></h2>
<p>The following sections will guide you through implementing a realtime
data processing application from scratch. If you want to deploy and run
the application right away, you can clone the sources from this GitHub
repository. In that case, feel free to skip the following two sections
and jump directly to the <a class="reference external" href="#build-and-run-application">Build and Run
Application</a> section.</p>
<div class="section" id="application-design">
<h3>Application Design<a class="headerlink" href="#application-design" title="Permalink to this headline">¶</a></h3>
<p>In CDAP, you process data in realtime by implementing a Flow. In this
example the Flow consists of two Flowlets. The <tt class="docutils literal"><span class="pre">Detector</span></tt> Flowlet
consumes data from a <tt class="docutils literal"><span class="pre">diskReads</span></tt> Stream, parses the event, and outputs
the disk ID if the event was a slow disk read. The <tt class="docutils literal"><span class="pre">Tracker</span></tt> Flowlet
reads the disk ID emitted by the <tt class="docutils literal"><span class="pre">Detector</span></tt>, and updates a count of
how often that disk has recorded a slow read. If a disk has recorded too
many slow reads, the disk ID is written to a separate dataset that
tracks all disks that should soon be replaced.</p>
<div class="figure">
<img alt="" src="../_images/app-design1.png" />
</div>
</div>
<div class="section" id="implementation">
<h3>Implementation<a class="headerlink" href="#implementation" title="Permalink to this headline">¶</a></h3>
<p>The recommended way to build a CDAP application from scratch is to use a
Maven project. Use the following directory structure (you’ll find
contents of the files below):</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">./pom.xml</span>
<span class="go">./src/main/java/co/cask/cdap/guides/flow/DiskPerformanceApp.java</span>
<span class="go">./src/main/java/co/cask/cdap/guides/flow/DiskPerformanceFlow.java</span>
<span class="go">./src/main/java/co/cask/cdap/guides/flow/DiskPerformanceHTTPHandler.java</span>
<span class="go">./src/main/java/co/cask/cdap/guides/flow/DetectorFlowlet.java</span>
<span class="go">./src/main/java/co/cask/cdap/guides/flow/TrackerFlowlet.java</span>
</pre></div>
</div>
<p>First create the application, which contains a stream, flow, and
datasets.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DiskPerformanceApp</span> <span class="kd">extends</span> <span class="n">AbstractApplication</span> <span class="o">{</span>
  <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">APP_NAME</span> <span class="o">=</span> <span class="s">&quot;DiskPerformanceApp&quot;</span><span class="o">;</span>
  <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">STREAM_NAME</span> <span class="o">=</span> <span class="s">&quot;diskReads&quot;</span><span class="o">;</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">setName</span><span class="o">(</span><span class="n">APP_NAME</span><span class="o">);</span>
    <span class="n">addStream</span><span class="o">(</span><span class="k">new</span> <span class="n">Stream</span><span class="o">(</span><span class="n">STREAM_NAME</span><span class="o">));</span>
    <span class="n">createDataset</span><span class="o">(</span><span class="s">&quot;slowDiskReads&quot;</span><span class="o">,</span> <span class="n">KeyValueTable</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">createDataset</span><span class="o">(</span><span class="s">&quot;slowDisks&quot;</span><span class="o">,</span> <span class="n">KeyValueTable</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">addFlow</span><span class="o">(</span><span class="k">new</span> <span class="n">DiskPerformanceFlow</span><span class="o">());</span>
    <span class="n">addService</span><span class="o">(</span><span class="n">DiskPerformanceHTTPHandler</span><span class="o">.</span><span class="na">NAME</span><span class="o">,</span> <span class="k">new</span> <span class="n">DiskPerformanceHTTPHandler</span><span class="o">());</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Next, we create a Flow, which is composed of two Flowlets, the
<tt class="docutils literal"><span class="pre">Detector</span></tt> and <tt class="docutils literal"><span class="pre">Tracker</span></tt>. The Detector Flowlet parses disk I/O
events from the Stream and emits the disk ID if the operation is slower
than a threshold. The Tracker consumes the output of the Detector
Flowlet and performs an analysis to detect a slow disk. Since a Tracker
Flowlet performs dataset operations, it may be slower than a Detector
Flowlet that performs all processing in memory. Thus, it&#8217;s a good idea
to have multiple Tracker Flowlet instances.</p>
<p>In the Flow specification below, we&#8217;ll start with a single Detector and
two Tracker Flowlets. The parser reads from the stream, and the tracker
then reads from the parser. We will set the number of <tt class="docutils literal"><span class="pre">Tracker</span></tt>
instances to two. This means that there will be two separate
<tt class="docutils literal"><span class="pre">Trackers</span></tt> running, each taking turns reading what the Detector
outputs. You want to do this if a single <tt class="docutils literal"><span class="pre">Detector</span></tt> can output more
quickly than a single <tt class="docutils literal"><span class="pre">Tracker</span></tt> can process.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DiskPerformanceFlow</span> <span class="kd">implements</span> <span class="n">Flow</span> <span class="o">{</span>
  <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">NAME</span> <span class="o">=</span> <span class="s">&quot;DiskPerformanceFlow&quot;</span><span class="o">;</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">FlowSpecification</span> <span class="nf">configure</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">FlowSpecification</span><span class="o">.</span><span class="na">Builder</span><span class="o">.</span><span class="na">with</span><span class="o">()</span>
      <span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="n">NAME</span><span class="o">)</span>
      <span class="o">.</span><span class="na">setDescription</span><span class="o">(</span><span class="s">&quot;Tracks slow disks using I/O ops stats&quot;</span><span class="o">)</span>
      <span class="o">.</span><span class="na">withFlowlets</span><span class="o">()</span>
        <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">DetectorFlowlet</span><span class="o">.</span><span class="na">NAME</span><span class="o">,</span> <span class="k">new</span> <span class="n">DetectorFlowlet</span><span class="o">())</span>
        <span class="c1">// start with 2 instances of the tracker</span>
        <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">TrackerFlowlet</span><span class="o">.</span><span class="na">NAME</span><span class="o">,</span> <span class="k">new</span> <span class="n">TrackerFlowlet</span><span class="o">(),</span> <span class="mi">2</span><span class="o">)</span>
      <span class="o">.</span><span class="na">connect</span><span class="o">()</span>
        <span class="o">.</span><span class="na">fromStream</span><span class="o">(</span><span class="n">DiskPerformanceApp</span><span class="o">.</span><span class="na">STREAM_NAME</span><span class="o">).</span><span class="na">to</span><span class="o">(</span><span class="n">DetectorFlowlet</span><span class="o">.</span><span class="na">NAME</span><span class="o">)</span>
        <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">DetectorFlowlet</span><span class="o">.</span><span class="na">NAME</span><span class="o">).</span><span class="na">to</span><span class="o">(</span><span class="n">TrackerFlowlet</span><span class="o">.</span><span class="na">NAME</span><span class="o">)</span>
      <span class="o">.</span><span class="na">build</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Next we create the <tt class="docutils literal"><span class="pre">Detector</span></tt> Flowlet, which reads from the Stream and
outputs the disk ID if the event was a slow read.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DetectorFlowlet</span> <span class="kd">extends</span> <span class="n">AbstractFlowlet</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">SLOW_THRESHOLD</span> <span class="o">=</span> <span class="mi">1000</span><span class="o">;</span>
  <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">NAME</span> <span class="o">=</span> <span class="s">&quot;slowReadDetector&quot;</span><span class="o">;</span>

  <span class="kd">private</span> <span class="n">OutputEmitter</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">out</span><span class="o">;</span>

  <span class="nd">@ProcessInput</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">process</span><span class="o">(</span><span class="n">StreamEvent</span> <span class="n">diskMetrics</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">event</span> <span class="o">=</span> <span class="n">Charsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="n">diskMetrics</span><span class="o">.</span><span class="na">getBody</span><span class="o">()).</span><span class="na">toString</span><span class="o">();</span>
    <span class="c1">// events are expected to have the following format:</span>
    <span class="c1">// diskId operationTime (in microseconds)</span>
    <span class="n">String</span><span class="o">[]</span> <span class="n">fields</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&quot; &quot;</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
    <span class="n">String</span> <span class="n">diskId</span> <span class="o">=</span> <span class="n">fields</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
    <span class="kt">long</span> <span class="n">readTime</span> <span class="o">=</span> <span class="n">Long</span><span class="o">.</span><span class="na">parseLong</span><span class="o">(</span><span class="n">fields</span><span class="o">[</span><span class="mi">1</span><span class="o">]);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">readTime</span> <span class="o">&gt;</span> <span class="n">SLOW_THRESHOLD</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">out</span><span class="o">.</span><span class="na">emit</span><span class="o">(</span><span class="n">diskId</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Next we create the <tt class="docutils literal"><span class="pre">Tracker</span></tt> Flowlet, which reads the output of the
<tt class="docutils literal"><span class="pre">Detector</span></tt> Flowlet, and updates how many times each disk reported a
slow read. If a disk records too many slow reads, the <tt class="docutils literal"><span class="pre">Tracker</span></tt> places
it in a separate dataset used to track slow disks that may need to be
replaced soon.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TrackerFlowlet</span> <span class="kd">extends</span> <span class="n">AbstractFlowlet</span> <span class="o">{</span>
  <span class="c1">// intentionally set very low for illustrative purposes</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">FLAG_THRESHOLD</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span>
  <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">NAME</span> <span class="o">=</span> <span class="s">&quot;slowDiskTracker&quot;</span><span class="o">;</span>

  <span class="nd">@UseDataSet</span><span class="o">(</span><span class="s">&quot;slowDiskReads&quot;</span><span class="o">)</span>
  <span class="kd">private</span> <span class="n">KeyValueTable</span> <span class="n">slowDiskReadsTable</span><span class="o">;</span>

  <span class="nd">@UseDataSet</span><span class="o">(</span><span class="s">&quot;slowDisks&quot;</span><span class="o">)</span>
  <span class="kd">private</span> <span class="n">KeyValueTable</span> <span class="n">slowDisksTable</span><span class="o">;</span>

  <span class="nd">@ProcessInput</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">process</span><span class="o">(</span><span class="n">String</span> <span class="n">diskId</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">byte</span><span class="o">[]</span> <span class="n">countAsBytes</span> <span class="o">=</span> <span class="n">slowDiskReadsTable</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">diskId</span><span class="o">);</span>
    <span class="kt">long</span> <span class="n">slowCount</span> <span class="o">=</span> <span class="n">countAsBytes</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="n">Bytes</span><span class="o">.</span><span class="na">toLong</span><span class="o">(</span><span class="n">countAsBytes</span><span class="o">);</span>
    <span class="n">slowCount</span><span class="o">++;</span>
    <span class="n">slowDiskReadsTable</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">diskId</span><span class="o">,</span> <span class="n">Bytes</span><span class="o">.</span><span class="na">toBytes</span><span class="o">(</span><span class="n">slowCount</span><span class="o">));</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">slowCount</span> <span class="o">==</span> <span class="n">FLAG_THRESHOLD</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">slowDisksTable</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">diskId</span><span class="o">,</span> <span class="n">Bytes</span><span class="o">.</span><span class="na">toBytes</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()));</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Finally, we implement a Service that exposes a RESTful API used to
display the slow disks that need to be replaced soon:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DiskPerformanceHTTPHandler</span> <span class="kd">extends</span> <span class="n">AbstractHttpServiceHandler</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">SimpleDateFormat</span> <span class="n">DATE_FORMAT</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">&quot;yyyy-MM-dd HH:mm:ss z&quot;</span><span class="o">);</span>
  <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">NAME</span> <span class="o">=</span> <span class="s">&quot;DiskPerformanceService&quot;</span><span class="o">;</span>

  <span class="nd">@UseDataSet</span><span class="o">(</span><span class="s">&quot;slowDisks&quot;</span><span class="o">)</span>
  <span class="kd">private</span> <span class="n">KeyValueTable</span> <span class="n">slowDisksTable</span><span class="o">;</span>

  <span class="nd">@Path</span><span class="o">(</span><span class="s">&quot;slowdisks&quot;</span><span class="o">)</span>
  <span class="nd">@GET</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">getSlowDisks</span><span class="o">(</span><span class="n">HttpServiceRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServiceResponder</span> <span class="n">responder</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">KeyValue</span><span class="o">&lt;</span><span class="kt">byte</span><span class="o">[],</span> <span class="kt">byte</span><span class="o">[]&gt;&gt;</span> <span class="n">slowDisksScan</span> <span class="o">=</span> <span class="n">slowDisksTable</span><span class="o">.</span><span class="na">scan</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">slowDisks</span> <span class="o">=</span> <span class="n">Maps</span><span class="o">.</span><span class="na">newHashMap</span><span class="o">();</span>
    <span class="k">while</span> <span class="o">(</span><span class="n">slowDisksScan</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
      <span class="n">KeyValue</span><span class="o">&lt;</span><span class="kt">byte</span><span class="o">[],</span> <span class="kt">byte</span><span class="o">[]&gt;</span> <span class="n">slowDisk</span> <span class="o">=</span> <span class="n">slowDisksScan</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
      <span class="n">String</span> <span class="n">diskId</span> <span class="o">=</span> <span class="n">Bytes</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">slowDisk</span><span class="o">.</span><span class="na">getKey</span><span class="o">());</span>
      <span class="kt">long</span> <span class="n">troubleTime</span> <span class="o">=</span> <span class="n">Bytes</span><span class="o">.</span><span class="na">toLong</span><span class="o">(</span><span class="n">slowDisk</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
      <span class="n">String</span> <span class="n">troubleTimeStr</span> <span class="o">=</span> <span class="n">DATE_FORMAT</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="k">new</span> <span class="n">Date</span><span class="o">(</span><span class="n">troubleTime</span><span class="o">));</span>
      <span class="n">slowDisks</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">diskId</span><span class="o">,</span> <span class="n">troubleTimeStr</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="n">responder</span><span class="o">.</span><span class="na">sendJson</span><span class="o">(</span><span class="mi">200</span><span class="o">,</span> <span class="n">slowDisks</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>With this, we have a working application! We can build it, send data to
the stream, and send an HTTP request to get slow disks that should be
replaced soon. Before we do that, let’s add a couple enhancements.</p>
</div>
<div class="section" id="realtime-processing-with-micro-batches">
<h3>Realtime Processing with Micro-batches<a class="headerlink" href="#realtime-processing-with-micro-batches" title="Permalink to this headline">¶</a></h3>
<p>Everything that happens in the process method of a flowlet is guaranteed
to happen exactly once. This is made possible by the execution of each
process method inside a separate transaction, which is done by the CDAP
framework. The overhead of the transaction is very small, but it is a
good idea to minimize it even further by instructing the framework to
process multiple inputs within the same transaction. That is, consume up
to a small number of inputs, if those are available. This technique is
called &#8220;processing with micro-batches.&#8221;</p>
<p>With a batch size of 100, we will pay the cost of the overhead just once
for every 100 events instead of 100 times for 100 events. Telling a
flowlet to process its input in batches of 100 is as simple as adding
the Batch annotation to the process method.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TrackerFlowlet</span> <span class="kd">extends</span> <span class="n">AbstractFlowlet</span> <span class="o">{</span>
  <span class="o">...</span>

  <span class="nd">@ProcessInput</span>
  <span class="nd">@Batch</span><span class="o">(</span><span class="mi">100</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">process</span><span class="o">(</span><span class="n">String</span> <span class="n">diskId</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">...</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Most of the time, using mini-batches is a trade-off between processing
latency and throughput. You pay less overhead for transactions with
mini-batches in order to reach a higher throughput. At the same time,
your event is processed only when the whole batch is processed, which
usually means a higher latency.</p>
</div>
<div class="section" id="optimizing-for-scale">
<h3>Optimizing for Scale<a class="headerlink" href="#optimizing-for-scale" title="Permalink to this headline">¶</a></h3>
<p>When using micro-batching, you need to be also careful about two things:</p>
<ul class="simple">
<li>running out of memory; and</li>
<li>the increased chance for conflicts.</li>
</ul>
<p>When you process data in batches, you keep the entire batch and any
intermediate data in memory, which grows as you increase the batch size.
When you consume data with multiple flowlet instances which update the
same values in datasets, there is a chance for a conflict. The framework
resolves them automatically, but in the end, you pay a price for the
overhead caused by a retry. As batch size grows, the chance for a
conflict increases, as more rows are modified by overlapping
transactions. It is important to correctly partition data between
flowlet instances to reduce the chance of conflict or to avoid it
altogether.</p>
<p>The default partitioning strategy is round-robin, which basically means
that data is partitioned randomly and different batches processed in
parallel may have the same values and may result in updating the same
cells in a dataset. Using hash-partitioning will help to resolve this.
Let&#8217;s take a look at the data flow of our application to see how we can
employ a hash-partitioning strategy to avoid conflicts.</p>
<p>Suppose the Detector reads two slow disk reads for disk1. It outputs
“disk1” and again outputs “disk1”. Since the default partitioning
strategy is round-robin, Tracker1 takes the first “disk1” and Tracker2
takes the second “disk1”. Since both Trackers are running
simultaneously, they both read that “disk1” was slow 0 times, they both
add one to that count of 0, then both attempt to write what they think
is the new value of 1. This is called a write conflict. CDAP detects the
conflict, allows only one write to go through, then replays the entire
second event. For example, CDAP may decide to let Tracker1 go through,
which updates the slow count of disk1 to 1. When Tracker2 tries to
write, CDAP will detect the conflict, then replay the event. Tracker2
reads “disk1” as input, gets the slow count of disk1 which has now been
updated to 1, adds 1 to the count, and successfully writes the new value
of 2.</p>
<p>Now pretend that we are using batches of 1000 instead of batches of 1.
Tracker1 takes a batch of 1000 and Tracker2 takes a separate batch of
1000. The chance that Tracker1 has a disk in its batch that also appears
in Tracker2’s batch is pretty high. This means that when they both go to
update their counts, only one of their updates will go through, with the
other needing to be replayed. This means the work that one Tracker did
will be entirely wasted and retried again, which is much more costly
with a big batch size because everything in the batch must be replayed.</p>
<p>One way to solve this problem is to make sure that no disks that go to
Tracker1 ever go to Tracker2. For example, all events for disk1 should
go only to Tracker1, and never should go to Tracker2. This is done by
using hash partitioning instead of round-robin. This is easy in CDAP and
can be done in two lines. When emitting in the Detector, a partition ID
and key must be given in addition to the data being emitted.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DetectorFlowlet</span> <span class="kd">extends</span> <span class="n">AbstractFlowlet</span> <span class="o">{</span>
  <span class="o">...</span>

  <span class="nd">@ProcessInput</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">process</span><span class="o">(</span><span class="n">StreamEvent</span> <span class="n">diskMetrics</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">...</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">readTime</span> <span class="o">&gt;</span> <span class="n">SLOW_THRESHOLD</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">out</span><span class="o">.</span><span class="na">emit</span><span class="o">(</span><span class="n">diskId</span><span class="o">,</span> <span class="s">&quot;diskId&quot;</span><span class="o">,</span> <span class="n">diskId</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>In the Tracker, you simply add the HashPartition annotation with the
partition ID.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TrackerFlowlet</span> <span class="kd">extends</span> <span class="n">AbstractFlowlet</span> <span class="o">{</span>
  <span class="o">...</span>

  <span class="nd">@ProcessInput</span>
  <span class="nd">@Batch</span><span class="o">(</span><span class="mi">10</span><span class="o">)</span>
  <span class="nd">@HashPartition</span><span class="o">(</span><span class="s">&quot;diskId&quot;</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">process</span><span class="o">(</span><span class="n">String</span> <span class="n">diskId</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">...</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Now we can enjoy the benefits of larger batch sizes without worrying
about wasted work due to write conflicts. With batching and hash
partitioning, our Detector and Tracker classes have changed just three
lines with their final versions below:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DetectorFlowlet</span> <span class="kd">extends</span> <span class="n">AbstractFlowlet</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">SLOW_THRESHOLD</span> <span class="o">=</span> <span class="mi">1000</span><span class="o">;</span>
  <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">NAME</span> <span class="o">=</span> <span class="s">&quot;slowReadDetector&quot;</span><span class="o">;</span>

  <span class="kd">private</span> <span class="n">OutputEmitter</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">out</span><span class="o">;</span>

  <span class="nd">@ProcessInput</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">process</span><span class="o">(</span><span class="n">StreamEvent</span> <span class="n">diskMetrics</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">event</span> <span class="o">=</span> <span class="n">Charsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="n">diskMetrics</span><span class="o">.</span><span class="na">getBody</span><span class="o">()).</span><span class="na">toString</span><span class="o">();</span>
    <span class="c1">// events are expected to have the following format:</span>
    <span class="c1">// diskId operationTime (in microseconds)</span>
    <span class="n">String</span><span class="o">[]</span> <span class="n">fields</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&quot; &quot;</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
    <span class="n">String</span> <span class="n">diskId</span> <span class="o">=</span> <span class="n">fields</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
    <span class="kt">long</span> <span class="n">readTime</span> <span class="o">=</span> <span class="n">Long</span><span class="o">.</span><span class="na">parseLong</span><span class="o">(</span><span class="n">fields</span><span class="o">[</span><span class="mi">1</span><span class="o">]);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">readTime</span> <span class="o">&gt;</span> <span class="n">SLOW_THRESHOLD</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">out</span><span class="o">.</span><span class="na">emit</span><span class="o">(</span><span class="n">diskId</span><span class="o">,</span> <span class="s">&quot;diskId&quot;</span><span class="o">,</span> <span class="n">diskId</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TrackerFlowlet</span> <span class="kd">extends</span> <span class="n">AbstractFlowlet</span> <span class="o">{</span>
  <span class="c1">// intentionally set very low for illustrative purposes</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">FLAG_THRESHOLD</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span>
  <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">NAME</span> <span class="o">=</span> <span class="s">&quot;slowDiskTracker&quot;</span><span class="o">;</span>

  <span class="nd">@UseDataSet</span><span class="o">(</span><span class="s">&quot;slowDiskReads&quot;</span><span class="o">)</span>
  <span class="kd">private</span> <span class="n">KeyValueTable</span> <span class="n">slowDiskReadsTable</span><span class="o">;</span>

  <span class="nd">@UseDataSet</span><span class="o">(</span><span class="s">&quot;slowDisks&quot;</span><span class="o">)</span>
  <span class="kd">private</span> <span class="n">KeyValueTable</span> <span class="n">slowDisksTable</span><span class="o">;</span>

  <span class="nd">@ProcessInput</span>
  <span class="nd">@Batch</span><span class="o">(</span><span class="mi">100</span><span class="o">)</span>
  <span class="nd">@HashPartition</span><span class="o">(</span><span class="s">&quot;diskId&quot;</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">process</span><span class="o">(</span><span class="n">String</span> <span class="n">diskId</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">byte</span><span class="o">[]</span> <span class="n">countAsBytes</span> <span class="o">=</span> <span class="n">slowDiskReadsTable</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">diskId</span><span class="o">);</span>
    <span class="kt">long</span> <span class="n">slowCount</span> <span class="o">=</span> <span class="n">countAsBytes</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="n">Bytes</span><span class="o">.</span><span class="na">toLong</span><span class="o">(</span><span class="n">countAsBytes</span><span class="o">);</span>
    <span class="n">slowCount</span><span class="o">++;</span>
    <span class="n">slowDiskReadsTable</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">diskId</span><span class="o">,</span> <span class="n">Bytes</span><span class="o">.</span><span class="na">toBytes</span><span class="o">(</span><span class="n">slowCount</span><span class="o">));</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">slowCount</span> <span class="o">==</span> <span class="n">FLAG_THRESHOLD</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">slowDisksTable</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">diskId</span><span class="o">,</span> <span class="n">Bytes</span><span class="o">.</span><span class="na">toBytes</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()));</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="build-and-run-application">
<h2>Build and Run Application<a class="headerlink" href="#build-and-run-application" title="Permalink to this headline">¶</a></h2>
<p>The DiskPerformanceApp can be built and packaged using the Apache Maven
command:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">mvn clean package</span>
</pre></div>
</div>
<p>Note that the remaining commands assume that the <tt class="docutils literal"><span class="pre">cdap-cli.sh</span></tt> script
is available on your PATH. If this is not the case, please add it:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">export PATH=$PATH:&lt;CDAP home&gt;/bin</span>
</pre></div>
</div>
<p>If you haven&#8217;t already started a standalone CDAP installation, start it
with the command:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">cdap.sh start</span>
</pre></div>
</div>
<p>We can then deploy the application:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">cdap-cli.sh deploy app target/cdap-flow-guide-1.0.0.jar</span>
</pre></div>
</div>
<p>Next we start the flow:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">cdap-cli.sh start flow DiskPerformanceApp.DiskPerformanceFlow</span>
</pre></div>
</div>
<p>Note that there is one instance of the <tt class="docutils literal"><span class="pre">Detector</span></tt> Flowlet running and
two instances of the <tt class="docutils literal"><span class="pre">Tracker</span></tt> Flowlet running:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">cdap-cli.sh get instances flowlet DiskPerformanceApp.DiskPerformanceFlow.slowReadDetector</span>
<span class="go">1</span>

<span class="go">cdap-cli.sh get instances flowlet DiskPerformanceApp.DiskPerformanceFlow.slowDiskTracker</span>
<span class="go">2</span>
</pre></div>
</div>
<p>We can scale out our application and increase the number of <tt class="docutils literal"><span class="pre">Tracker</span></tt>
Flowlets to four:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">cdap-cli.sh set instances flowlet DiskPerformanceApp.DiskPerformanceFlow.slowDiskTracker 4</span>

<span class="go">cdap-cli.sh get instances flowlet DiskPerformanceApp.DiskPerformanceFlow.slowDiskTracker</span>
<span class="go">4</span>
</pre></div>
</div>
<p>Scaling your application is easy in CDAP! Now we can manually send
enough slow disk events to the diskReads stream to get a disk classified
as a slow disk:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">cdap-cli.sh send stream diskReads &quot;disk1 1001&quot;</span>
<span class="go">cdap-cli.sh send stream diskReads &quot;disk1 1001&quot;</span>
<span class="go">cdap-cli.sh send stream diskReads &quot;disk1 1001&quot;</span>
<span class="go">cdap-cli.sh send stream diskReads &quot;disk1 1001&quot;</span>
</pre></div>
</div>
<p>Next we start the service:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">cdap-cli.sh start service DiskPerformanceApp.DiskPerformanceService</span>
</pre></div>
</div>
<p>The Service exposes a RESTful API that allows us to display all slow
disks and the timestamp at which they were flagged as a slow disk. Make
the request to query slow disks:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">curl http://localhost:10000/v2/apps/DiskPerformanceApp/services/DiskPerformanceService/methods/slowdisks</span>
</pre></div>
</div>
<p>Example output:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">{&quot;disk1&quot;:&quot;2014-10-30 13:46:33 PDT&quot;}</span>
</pre></div>
</div>
</div>
<div class="section" id="extend-this-example">
<h2>Extend This Example<a class="headerlink" href="#extend-this-example" title="Permalink to this headline">¶</a></h2>
<p>To make this application more useful, you can extend it by:</p>
<ul class="simple">
<li>Including the disk type in the Stream event and categorize a slow
read based on the type of disk.</li>
<li>Passing your own custom Java object through the Flowlets instead of a
String.</li>
<li>Adding an endpoint to the Service that can remove a disk from the
<tt class="docutils literal"><span class="pre">slowDisks</span></tt> Dataset.</li>
<li>Changing the logic so that 1000 normal disk read times counteract a
slow disk read.</li>
<li>Tracking additional disk metrics, such as write times, and use a
combination of factors to determine whether or not a disk belongs in
the slowDisks table.</li>
</ul>
</div>
<div class="section" id="share-and-discuss">
<h2>Share and Discuss!<a class="headerlink" href="#share-and-discuss" title="Permalink to this headline">¶</a></h2>
<p>Have a question? Discuss at the <a class="reference external" href="https://groups.google.com/forum/#!forum/cdap-user">CDAP User Mailing
List.</a></p>
</div>
<div class="section" id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<p>Copyright © 2014 Cask Data, Inc.</p>
<p>Licensed under the Apache License, Version 2.0 (the &#8220;License&#8221;); you may
not use this file except in compliance with the License. You may obtain
a copy of the License at</p>
<p><a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an &#8220;AS IS&#8221; BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div role="note" aria-label="manuals links">
    <h3>CDAP Documentation</h3>
    <ul class="this-page-menu">
      <li><a href="../table-of-contents/../../developers-manual/index.html"
            rel="nofollow">Developers’ Manual</a></li>
      <li><a href="../table-of-contents/../../reference-manual/index.html"
            rel="nofollow">Reference Manual</a></li>
      <li><a href="../table-of-contents/../../admin-manual/index.html"
            rel="nofollow">Administration Manual</a></li>
      <li><b><a href="../table-of-contents/../../examples-manual/index.html"
            rel="nofollow">Examples, Guides, and Tutorials</a></b></li>
      <li><a href="../table-of-contents/../../reference-manual/release-notes.html"
            rel="nofollow">Release Notes</a></li>
      <li><a href="../table-of-contents/../../reference-manual/glossary.html"
            rel="nofollow">Glossary</a></li>
      <li><a href="../table-of-contents/../../reference-manual/faq.html"
            rel="nofollow">FAQ</a></li>
    </ul>
   </div><!--
  Copyright © 2014 Cask Data, Inc.

  Licensed under the Apache License, Version 2.0 (the "License"); you may not
  use this file except in compliance with the License. You may obtain a copy of
  the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  License for the specific language governing permissions and limitations under
  the License.
-->

<h3 class="pagenavtitle"><a href="../table-of-contents.html">Examples, Guides, and Tutorials: Table&nbsp;of&nbsp;Contents</a></h3>
<nav class="pagenav">
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Examples</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">How-To Guides</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">Realtime Data Processing with a Flow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-you-will-build">What You Will Build</a></li>
<li class="toctree-l3"><a class="reference internal" href="#what-you-will-need">What You Will Need</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lets-build-it">Let’s Build It!</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-and-run-application">Build and Run Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="#extend-this-example">Extend This Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#share-and-discuss">Share and Discuss!</a></li>
<li class="toctree-l3"><a class="reference internal" href="#license">License</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cdap-flume-guide.html">Ingesting Data into CDAP using Apache Flume</a></li>
<li class="toctree-l2"><a class="reference internal" href="cdap-mapreduce-guide.html">Batch Data Processing With CDAP</a></li>
<li class="toctree-l2"><a class="reference internal" href="cdap-bi-guide.html">Analyzing CDAP Data from BI Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="cdap-timeseries-guide.html">Storing Timeseries Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="cdap-twitter-ingest-guide.html">Consuming Twitter Data in Realtime</a></li>
<li class="toctree-l2"><a class="reference internal" href="cdap-spark-guide.html">Iterative Data Processing with Apache Spark</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apps-packs.html">Apps and Packs</a></li>
</ul>

</nav>
  <h4>Previous Topic</h4>
  <p class="topless"><a href="index.html"
                        title="Previous Chapter">How-To Guides</a></p>
  <h4>Next Topic</h4>
  <p class="topless"><a href="cdap-flume-guide.html"
                        title="Next Chapter">Ingesting Data into CDAP using Apache Flume</a></p>
  <div role="note" aria-label="downloads links">
    <h3>Downloads</h3>
    <ul class="this-page-menu">
      <li><a href="http://docs.cask.co/cdap/2.5.2/cdap-docs-2.5.2-web.zip"
            rel="nofollow">Zip Archive of CDAP Documentation</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick Search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">

<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;margin:0px auto;}
.tg td{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg th{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg .tg-s6z2{text-align:center;}
.tg .tg-0ord{text-align:right;}
.tg a{font-weight:bold;}
</style>
<table class="tg" width= 100%>
  <tr>
    <th class="tg-031e">Previous Topic: 
    <a title="How-To Guides" href="index.html" />How-To Guides</a>&nbsp;&nbsp;
    
    </th>
    <th class="tg-s6z2">
        &copy; Copyright 2014 Cask Data, Inc.
    
    </th>
    <th class="tg-0ord">&nbsp;&nbsp;Next Topic:
    <a title="Ingesting Data into CDAP using Apache Flume" href="cdap-flume-guide.html" />Ingesting Data into CDAP using Apache Flume</a>
    
    </th>
  </tr>
</table>

    </div>
  </body>
</html>
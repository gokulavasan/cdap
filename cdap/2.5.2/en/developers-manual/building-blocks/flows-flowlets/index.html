<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Cask Data, Inc." name="author" />
<meta content="Copyright © 2014 Cask Data, Inc." name="copyright" />
<script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-55081520-2']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <title>Flows and Flowlets &mdash; Cask Data Application Platform 2.5.2 Documentation</title>
    
    <link rel="stylesheet" href="../../_static/cdap.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    



    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.5.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Cask Data Application Platform 2.5.2 Documentation" href="../../index.html" />
    <link rel="up" title="Building Blocks" href="../index.html" />
    <link rel="next" title="Flowlets" href="flowlets.html" />
    <link rel="prev" title="Datasets and MapReduce Jobs" href="../datasets/datasets-mapreduce.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">Index</a></li>
        <li class="right" >
          <a href="flowlets.html" title="Flowlets"
             accesskey="N">Next</a> |</li>
        <li class="right" >
          <a href="../datasets/datasets-mapreduce.html" title="Datasets and MapReduce Jobs"
             accesskey="P">Previous</a> |</li>
        <li><a href="../../table-of-contents.html">CDAP Developers’ Manual</a> &raquo;</li>
          <li><a href="../index.html" accesskey="U">Building Blocks</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="flows-and-flowlets">
<span id="flows"></span><span id="flows-flowlets-index"></span><h1>Flows and Flowlets<a class="headerlink" href="#flows-and-flowlets" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="flowlets.html"> Flowlets</a></li>
<li class="toctree-l1"><a class="reference internal" href="input-context.html"> Input Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="type-projection.html"> Type Projection</a></li>
<li class="toctree-l1"><a class="reference internal" href="stream-event.html"> Stream Event</a></li>
<li class="toctree-l1"><a class="reference internal" href="tick-methods.html"> Tick Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="connecting-flowlets.html"> Connecting Flowlets</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch-execution.html"> Batch Execution</a></li>
<li class="toctree-l1"><a class="reference internal" href="flowlets-instances.html"> Flowlets and Instances</a></li>
<li class="toctree-l1"><a class="reference internal" href="partitioning-strategies.html"> Partitioning Strategies</a></li>
</ul>
</div>
<p><strong>Flows</strong> are user-implemented realtime stream processors. They are comprised of one or
more <strong>Flowlets</strong> that are wired together into a directed acyclic graph or DAG. Flowlets
pass data between one another; each Flowlet is able to perform custom logic and execute
data operations for each individual data object it processes. All data operations happen
in a consistent and durable way.</p>
<p>When processing a single input object, all operations, including the
removal of the object from the input, and emission of data to the
outputs, are executed in a transaction. This provides us with Atomicity,
Consistency, Isolation, and Durability (ACID) properties, and helps
assure a unique and core property of the Flow system: it guarantees
atomic and &#8220;exactly-once&#8221; processing of each input object by each
Flowlet in the DAG.</p>
<p>Flows are deployed to the CDAP instance and hosted within containers. Each
Flowlet instance runs in its own container. Each Flowlet in the DAG can
have multiple concurrent instances, each consuming a partition of the
Flowlet’s inputs.</p>
<p>To put data into your Flow, you can either connect the input of the Flow
to a Stream, or you can implement a Flowlet to generate or pull the data
from an external source.</p>
<p>The <tt class="docutils literal"><span class="pre">Flow</span></tt> interface allows you to specify the Flow’s metadata, <a class="reference internal" href="flowlets.html"><em>Flowlets,</em></a> <a class="reference internal" href="connecting-flowlets.html"><em>Flowlet connections,</em></a> (either Stream to Flowlet,
or Flowlet to Flowlet), and any <a class="reference internal" href="../datasets/index.html#datasets-index"><em>Datasets</em></a> used in the Flow.</p>
<p>To create a Flow, implement <tt class="docutils literal"><span class="pre">Flow</span></tt> via a <tt class="docutils literal"><span class="pre">configure</span></tt> method that
returns a <tt class="docutils literal"><span class="pre">FlowSpecification</span></tt> using the <tt class="docutils literal"><span class="pre">FlowSpecification.Builder()</span></tt>:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">class</span> <span class="nc">MyExampleFlow</span> <span class="kd">implements</span> <span class="n">Flow</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">FlowSpecification</span> <span class="nf">configure</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">FlowSpecification</span><span class="o">.</span><span class="na">Builder</span><span class="o">.</span><span class="na">with</span><span class="o">()</span>
      <span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&quot;mySampleFlow&quot;</span><span class="o">)</span>
      <span class="o">.</span><span class="na">setDescription</span><span class="o">(</span><span class="s">&quot;Flow for showing examples&quot;</span><span class="o">)</span>
      <span class="o">.</span><span class="na">withFlowlets</span><span class="o">()</span>
        <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;flowlet1&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">MyExampleFlowlet</span><span class="o">())</span>
        <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;flowlet2&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">MyExampleFlowlet2</span><span class="o">())</span>
      <span class="o">.</span><span class="na">connect</span><span class="o">()</span>
        <span class="o">.</span><span class="na">fromStream</span><span class="o">(</span><span class="s">&quot;myStream&quot;</span><span class="o">).</span><span class="na">to</span><span class="o">(</span><span class="s">&quot;flowlet1&quot;</span><span class="o">)</span>
        <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="s">&quot;flowlet1&quot;</span><span class="o">).</span><span class="na">to</span><span class="o">(</span><span class="s">&quot;flowlet2&quot;</span><span class="o">)</span>
      <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</div>
<p>In this example, the <em>name</em>, <em>description</em>, <em>with</em> (or <em>without</em>)
Flowlets, and <em>connections</em> are specified before building the Flow.</p>
<p class="rubric">Examples of Using Flows and Flowlets</p>
<p>Flows and Flowlets are included in just about every CDAP <a class="reference external" href="../../source/../../examples-manual/apps-packs.html#apps-and-packs" title="(in Cask Data Application Platform v2.5.2)"><em class="xref std std-ref">application</em></a>,
<a class="reference external" href="../../source/../../examples-manual/tutorials.html#tutorials" title="(in Cask Data Application Platform v2.5.2)"><em class="xref std std-ref">tutorial</em></a>, <a class="reference external" href="../../source/../../examples-manual/how-to-guides/index.html#guides-index" title="(in Cask Data Application Platform v2.5.2)"><em class="xref std std-ref">guide</em></a> or <a class="reference external" href="../../source/../../examples-manual/examples/index.html#examples-index" title="(in Cask Data Application Platform v2.5.2)"><em class="xref std std-ref">example</em></a>.</p>
<ul class="simple">
<li>The simplest example, <a class="reference external" href="../../source/../../examples-manual/examples/hello-world.html#examples-hello-world" title="(in Cask Data Application Platform v2.5.2)"><em class="xref std std-ref">Hello World</em></a>, demonstrates using <strong>a
flow with a single flowlet</strong> to ingest a name into a dataset.</li>
<li>For an example of <strong>annotated Flowlets,</strong> see the <a class="reference external" href="../../source/../../examples-manual/examples/count-random.html#examples-count-random" title="(in Cask Data Application Platform v2.5.2)"><em class="xref std std-ref">Count Random</em></a> example.</li>
<li>For examples of <strong>flows with multiple flowlets,</strong> see the <a class="reference external" href="../../source/../../examples-manual/examples/purchase.html#examples-purchase" title="(in Cask Data Application Platform v2.5.2)"><em class="xref std std-ref">Purchase</em></a> and <a class="reference external" href="../../source/../../examples-manual/examples/count-random.html#examples-count-random" title="(in Cask Data Application Platform v2.5.2)"><em class="xref std std-ref">Count Random</em></a> examples.</li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div role="note" aria-label="manuals links">
    <h3>CDAP Documentation</h3>
    <ul class="this-page-menu">
      <li><b><a href="../../table-of-contents/../../developers-manual/index.html"
            rel="nofollow">Developers’ Manual</a></b></li>
      <li><a href="../../table-of-contents/../../reference-manual/index.html"
            rel="nofollow">Reference Manual</a></li>
      <li><a href="../../table-of-contents/../../admin-manual/index.html"
            rel="nofollow">Administration Manual</a></li>
      <li><a href="../../table-of-contents/../../examples-manual/index.html"
            rel="nofollow">Examples, Guides, and Tutorials</a></li>
      <li><a href="../../table-of-contents/../../reference-manual/release-notes.html"
            rel="nofollow">Release Notes</a></li>
      <li><a href="../../table-of-contents/../../reference-manual/glossary.html"
            rel="nofollow">Glossary</a></li>
      <li><a href="../../table-of-contents/../../reference-manual/faq.html"
            rel="nofollow">FAQ</a></li>
    </ul>
   </div><!--
  Copyright © 2014 Cask Data, Inc.

  Licensed under the Apache License, Version 2.0 (the "License"); you may not
  use this file except in compliance with the License. You may obtain a copy of
  the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  License for the specific language governing permissions and limitations under
  the License.
-->

<h3 class="pagenavtitle"><a href="../../table-of-contents.html">Developers’ Manual: Table&nbsp;of&nbsp;Contents</a></h3>
<nav class="pagenav">
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html"> Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.html"> Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/index.html"> Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html"> Building Blocks</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../core.html"> Core Virtualizations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applications.html"> Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../streams.html"> Streams</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datasets/index.html"> Datasets</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href=""> Flows and Flowlets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="flowlets.html"> Flowlets</a></li>
<li class="toctree-l3"><a class="reference internal" href="input-context.html"> Input Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="type-projection.html"> Type Projection</a></li>
<li class="toctree-l3"><a class="reference internal" href="stream-event.html"> Stream Event</a></li>
<li class="toctree-l3"><a class="reference internal" href="tick-methods.html"> Tick Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="connecting-flowlets.html"> Connecting Flowlets</a></li>
<li class="toctree-l3"><a class="reference internal" href="batch-execution.html"> Batch Execution</a></li>
<li class="toctree-l3"><a class="reference internal" href="flowlets-instances.html"> Flowlets and Instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="partitioning-strategies.html"> Partitioning Strategies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mapreduce-jobs.html"> MapReduce Jobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workflows.html"> Workflows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spark-jobs.html"> Spark Jobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../procedures.html"> Procedures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../services.html"> Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../transaction-system.html"> Transaction System</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html"> Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/index.html"> Testing and Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ingesting-tools/index.html"> Ingesting Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced/index.html"> Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting.html"> Troubleshooting</a></li>
</ul>

</nav>
  <h4>Previous Topic</h4>
  <p class="topless"><a href="../datasets/datasets-mapreduce.html"
                        title="Previous Chapter">Datasets and MapReduce Jobs</a></p>
  <h4>Next Topic</h4>
  <p class="topless"><a href="flowlets.html"
                        title="Next Chapter">Flowlets</a></p>
  <div role="note" aria-label="downloads links">
    <h3>Downloads</h3>
    <ul class="this-page-menu">
      <li><a href="http://docs.cask.co/cdap/2.5.2/cdap-docs-2.5.2-web.zip"
            rel="nofollow">Zip Archive of CDAP Documentation</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick Search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">

<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;margin:0px auto;}
.tg td{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg th{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg .tg-s6z2{text-align:center;}
.tg .tg-0ord{text-align:right;}
.tg a{font-weight:bold;}
</style>
<table class="tg" width= 100%>
  <tr>
    <th class="tg-031e">Previous Topic: 
    <a title="Datasets and MapReduce Jobs" href="../datasets/datasets-mapreduce.html" />Datasets and MapReduce Jobs</a>&nbsp;&nbsp;
    
    </th>
    <th class="tg-s6z2">
        &copy; Copyright 2014 Cask Data, Inc.
    
    </th>
    <th class="tg-0ord">&nbsp;&nbsp;Next Topic:
    <a title="Flowlets" href="flowlets.html" />Flowlets</a>
    
    </th>
  </tr>
</table>

    </div>
  </body>
</html>
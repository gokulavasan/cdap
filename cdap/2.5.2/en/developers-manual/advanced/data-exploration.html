<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Cask Data, Inc." name="author" />
<meta content="Copyright © 2014 Cask Data, Inc." name="copyright" />
<script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-55081520-2']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <title>Data Exploration &mdash; Cask Data Application Platform 2.5.2 Documentation</title>
    
    <link rel="stylesheet" href="../_static/cdap.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    



    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.5.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Cask Data Application Platform 2.5.2 Documentation" href="../index.html" />
    <link rel="up" title="Advanced Topics" href="index.html" />
    <link rel="next" title="Best Practices for Developing Applications" href="best-practices.html" />
    <link rel="prev" title="Advanced Topics" href="index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">Index</a></li>
        <li class="right" >
          <a href="best-practices.html" title="Best Practices for Developing Applications"
             accesskey="N">Next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Advanced Topics"
             accesskey="P">Previous</a> |</li>
        <li><a href="../table-of-contents.html">CDAP Developers’ Manual</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Advanced Topics</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="data-exploration">
<span id="id1"></span><h1>Data Exploration<a class="headerlink" href="#data-exploration" title="Permalink to this headline">¶</a></h1>
<p>It is often useful to be able to explore a Dataset in an ad-hoc manner.
This can be done using SQL if your Dataset fulfills two requirements:</p>
<ul class="simple">
<li>it defines the schema for each record; and</li>
<li>it has a method to scan its data record by record.</li>
</ul>
<p>For CDAP Datasets, this is done by implementing the <tt class="docutils literal"><span class="pre">RecordScannable</span></tt> interface.
The CDAP built-in Dataset <tt class="docutils literal"><span class="pre">KeyValueTable</span></tt> already implements this and can be used for ad-hoc queries.</p>
<p>Let&#8217;s take a closer look at the <tt class="docutils literal"><span class="pre">RecordScannable</span></tt> interface.</p>
<div class="section" id="defining-the-record-schema">
<h2>Defining the Record Schema<a class="headerlink" href="#defining-the-record-schema" title="Permalink to this headline">¶</a></h2>
<p>The record schema is given by returning the Java type of each record, and CDAP will derive the record schema from
that type:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">Type</span> <span class="nf">getRecordType</span><span class="o">();</span>
</pre></div>
</div>
<p>For example, suppose you have a class <tt class="docutils literal"><span class="pre">Entry</span></tt> defined as:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">class</span> <span class="nc">Entry</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">key</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">value</span><span class="o">;</span>
  <span class="o">...</span>
<span class="o">}</span>
</pre></div>
</div>
<p>You can implement a record-scannable Dataset that uses <tt class="docutils literal"><span class="pre">Entry</span></tt> as the record type:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">class</span> <span class="nc">MyDataset</span> <span class="o">...</span> <span class="kd">implements</span> <span class="n">RecordScannable</span><span class="o">&lt;</span><span class="n">Entry</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="o">...</span>
  <span class="kd">public</span> <span class="n">Type</span> <span class="nf">getRecordType</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Entry</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
  <span class="o">}</span>
</pre></div>
</div>
<p>Note that Java&#8217;s <tt class="docutils literal"><span class="pre">Class</span></tt> implements <tt class="docutils literal"><span class="pre">Type</span></tt> and you can simply return <tt class="docutils literal"><span class="pre">Entry.class</span></tt> as the record type.
CDAP will use reflection to infer a SQL-style schema from the record type.</p>
<p>In the case of the above class <tt class="docutils literal"><span class="pre">Entry</span></tt>, the schema will be:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">(</span><span class="n">key</span> <span class="n">STRING</span><span class="o">,</span> <span class="n">value</span> <span class="n">INT</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="limitations">
<span id="sql-limitations"></span><h2>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">The record type must be a structured type, that is, a Java class with fields. This is because SQL tables require
a structure type at the top level. This means the record type cannot be a primitive,
collection or map type. However, these types may appear nested inside the record type.</p>
</li>
<li><p class="first">The record type must be that of an actual Java class, not an interface. The same applies to the types of any
fields contained in the type. The reason is that interfaces only define methods but not fields; hence, reflection
would not be able to derive any fields or types from the interface.</p>
<p>The one exception to this rule is that Java collections such as <tt class="docutils literal"><span class="pre">List</span></tt> and <tt class="docutils literal"><span class="pre">Set</span></tt> are supported as well as
Java <tt class="docutils literal"><span class="pre">Map</span></tt>. This is possible because these interfaces are so commonly used that they deserve special handling.
These interfaces are parameterized and require special care as described in the next section.</p>
</li>
<li><p class="first">The record type must not be recursive. In other words, it cannot contain any class that directly or indirectly
contains a member of that same class. This is because a recursive type cannot be represented as a SQL schema.</p>
</li>
<li><p class="first">Fields of a class that are declared static or transient are ignored during schema generation. This means that the
record type must have at least one non-transient and non-static field. For example,
the <tt class="docutils literal"><span class="pre">java.util.Date</span></tt> class has only static and transient fields. Therefore a record type of <tt class="docutils literal"><span class="pre">Date</span></tt> is not
supported and will result in an exception when the Dataset is created.</p>
</li>
<li><p class="first">A Dataset can only be used in ad-hoc queries if its record type is completely contained in the Dataset definition.
This means that if the record type is or contains a parameterized type, then the type parameters must be present in
the Dataset definition. The reason is that the record type must be instantiated when executing an ad-hoc query.
If a type parameter depends on the jar file of the application that created the Dataset, then this jar file is not
available to the query execution runtime.</p>
<p>For example, you cannot execute ad-hoc queries over an <tt class="docutils literal"><span class="pre">ObjectStore&lt;MyObject&gt;</span></tt> if the <tt class="docutils literal"><span class="pre">MyObject</span></tt> is contained in
the application jar. However, if you define your own Dataset type <tt class="docutils literal"><span class="pre">MyObjectStore</span></tt> that extends or encapsulates an
<tt class="docutils literal"><span class="pre">ObjectStore&lt;MyObject&gt;</span></tt>, then <tt class="docutils literal"><span class="pre">MyObject</span></tt> becomes part of the Dataset definition for <tt class="docutils literal"><span class="pre">MyObjectStore</span></tt>. See the
<a class="reference external" href="../source/../../examples-manual/examples/purchase.html#examples-purchase" title="(in Cask Data Application Platform v2.5.2)"><em class="xref std std-ref">Purchase</em></a> application for an example.</p>
</li>
</ul>
</div>
<div class="section" id="parameterized-types">
<h2>Parameterized Types<a class="headerlink" href="#parameterized-types" title="Permalink to this headline">¶</a></h2>
<p>Suppose instead of being fixed to <tt class="docutils literal"><span class="pre">String</span></tt> and <tt class="docutils literal"><span class="pre">int</span></tt>, the <tt class="docutils literal"><span class="pre">Entry</span></tt> class is generic with type parameters for both
key and value:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">class</span> <span class="nc">GenericEntry</span><span class="o">&lt;</span><span class="n">KEY</span><span class="o">,</span> <span class="n">VALUE</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">KEY</span> <span class="n">key</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">VALUE</span> <span class="n">value</span><span class="o">;</span>
  <span class="o">...</span>
<span class="o">}</span>
</pre></div>
</div>
<p>We should easily be able to implement <tt class="docutils literal"><span class="pre">RecordScannable&lt;GenericEntry&lt;String,</span> <span class="pre">Integer&gt;&gt;</span></tt> by defining <tt class="docutils literal"><span class="pre">getRecordType()</span></tt>.
However, due to Java&#8217;s runtime type erasure, returning <tt class="docutils literal"><span class="pre">GenericEntry.class</span></tt> does not convey complete information
about the record type. With reflection, CDAP can only determine the names of the two fields, but not their types.</p>
<p>To convey information about the type parameters, we must instead return a <tt class="docutils literal"><span class="pre">ParameterizedType</span></tt>, which Java&#8217;s
<tt class="docutils literal"><span class="pre">Class</span></tt> does not implement. An easy way is to use Guava&#8217;s <tt class="docutils literal"><span class="pre">TypeToken</span></tt>:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">class</span> <span class="nc">MyDataset</span> <span class="o">...</span> <span class="kd">implements</span> <span class="n">RecordScannable</span><span class="o">&lt;</span><span class="n">GenericEntry</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;&gt;</span>
  <span class="kd">public</span> <span class="n">Type</span> <span class="nf">getRecordType</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">TypeToken</span><span class="o">&lt;</span><span class="n">GenericEntry</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;&gt;()</span> <span class="o">{</span> <span class="o">}.</span><span class="na">getType</span><span class="o">();</span>
  <span class="o">}</span>
</pre></div>
</div>
<p>While this seems a little more complex at first sight, it is the de-facto standard way of dealing with Java type
erasure.</p>
</div>
<div class="section" id="complex-types">
<h2>Complex Types<a class="headerlink" href="#complex-types" title="Permalink to this headline">¶</a></h2>
<p>Your record type can also contain nested structures, lists, or maps, and they will be mapped to type names as defined in
the <a class="reference external" href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL">Hive language manual</a>. For example, if
your record type is defined as:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">class</span> <span class="nc">Movie</span> <span class="o">{</span>
  <span class="n">String</span> <span class="n">title</span><span class="o">;</span>
  <span class="kt">int</span> <span class="n">year</span><span class="o">;</span>
  <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">cast</span><span class="o">;</span>
  <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">reviews</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The SQL schema of the dataset would be:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">(</span><span class="n">title</span> <span class="n">STRING</span><span class="o">,</span> <span class="n">year</span> <span class="n">INT</span><span class="o">,</span> <span class="n">cast</span> <span class="n">MAP</span><span class="o">&lt;</span><span class="n">STRING</span><span class="o">,</span> <span class="n">STRING</span><span class="o">&gt;,</span> <span class="n">reviews</span> <span class="n">ARRAY</span><span class="o">&lt;</span><span class="n">STRING</span><span class="o">&gt;)</span>
</pre></div>
</div>
<p>Refer to the Hive language manual for more details on schema and data types.</p>
</div>
<div class="section" id="scanning-records">
<span id="sql-scanning-records"></span><h2>Scanning Records<a class="headerlink" href="#scanning-records" title="Permalink to this headline">¶</a></h2>
<p>The second requirement for enabling SQL queries over a Dataset is to provide a means of scanning the Dataset record
by record. Similar to how the <tt class="docutils literal"><span class="pre">BatchReadable</span></tt> interface makes Datasets readable by Map/Reduce jobs by iterating
over pairs of key and value, <tt class="docutils literal"><span class="pre">RecordScannable</span></tt> iterates over records. You need to implement a method to partition the
Dataset into splits, and an additional method to create a record scanner for each split:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">List</span><span class="o">&lt;</span><span class="n">Split</span><span class="o">&gt;</span> <span class="nf">getSplits</span><span class="o">();</span>
<span class="n">RecordScanner</span><span class="o">&lt;</span><span class="n">RECORD</span><span class="o">&gt;</span> <span class="nf">createSplitRecordScanner</span><span class="o">(</span><span class="n">Split</span> <span class="n">split</span><span class="o">);</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">RecordScanner</span></tt> is very similar to a <tt class="docutils literal"><span class="pre">SplitReader</span></tt>; except that instead of <tt class="docutils literal"><span class="pre">nextKeyValue()</span></tt>,
<tt class="docutils literal"><span class="pre">getCurrentKey()</span></tt>, and <tt class="docutils literal"><span class="pre">getCurrentValue()</span></tt>, it implements <tt class="docutils literal"><span class="pre">nextRecord()</span></tt> and <tt class="docutils literal"><span class="pre">getCurrentRecord()</span></tt>.</p>
<p>Typically, you do not implement these methods from scratch but rely on the <tt class="docutils literal"><span class="pre">BatchReadable</span></tt>
implementation of the underlying Tables and Datasets. For example, if your Dataset is backed by a <tt class="docutils literal"><span class="pre">Table</span></tt>:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">class</span> <span class="nc">MyDataset</span> <span class="kd">implements</span> <span class="n">Dataset</span><span class="o">,</span> <span class="n">RecordScannable</span><span class="o">&lt;</span><span class="n">Entry</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="n">Table</span> <span class="n">table</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">VALUE_COLUMN</span> <span class="o">=</span> <span class="o">{</span> <span class="sc">&#39;c&#39;</span> <span class="o">};</span>

  <span class="c1">// ..</span>
  <span class="c1">// All other Dataset methods</span>
  <span class="c1">// ...</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Type</span> <span class="nf">getRecordType</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Entry</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Split</span><span class="o">&gt;</span> <span class="nf">getSplits</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">table</span><span class="o">.</span><span class="na">getSplits</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">RecordScanner</span><span class="o">&lt;</span><span class="n">Entry</span><span class="o">&gt;</span> <span class="nf">createSplitRecordScanner</span><span class="o">(</span><span class="n">Split</span> <span class="n">split</span><span class="o">)</span> <span class="o">{</span>

    <span class="kd">final</span> <span class="n">SplitReader</span><span class="o">&lt;</span><span class="kt">byte</span><span class="o">[],</span> <span class="n">Row</span><span class="o">&gt;</span> <span class="n">reader</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="na">createSplitReader</span><span class="o">(</span><span class="n">split</span><span class="o">);</span>

    <span class="k">return</span> <span class="k">new</span> <span class="n">RecordScanner</span><span class="o">&lt;</span><span class="n">Entry</span><span class="o">&gt;()</span> <span class="o">{</span>
      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">(</span><span class="n">Split</span> <span class="n">split</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">reader</span><span class="o">.</span><span class="na">initialize</span><span class="o">(</span><span class="n">split</span><span class="o">);</span>
      <span class="o">}</span>

      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">nextRecord</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">reader</span><span class="o">.</span><span class="na">nextKeyValue</span><span class="o">();</span>
      <span class="o">}</span>

      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="n">Entry</span> <span class="nf">getCurrentRecord</span><span class="o">()</span>  <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Entry</span><span class="o">(</span>
          <span class="n">Bytes</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">reader</span><span class="o">.</span><span class="na">getCurrentKey</span><span class="o">()),</span>
          <span class="n">reader</span><span class="o">.</span><span class="na">getCurrentValue</span><span class="o">().</span><span class="na">getInt</span><span class="o">(</span><span class="n">VALUE_COLUMN</span><span class="o">));</span>
      <span class="o">}</span>

      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">close</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
      <span class="o">}</span>

    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>While this is straightforward, it is even easier if your Dataset already implements <tt class="docutils literal"><span class="pre">BatchReadable</span></tt>.
In that case, you can reuse its implementation of <tt class="docutils literal"><span class="pre">getSplits()</span></tt> and implement the split record scanner
with a helper method
(<tt class="docutils literal"><span class="pre">Scannables.splitRecordScanner</span></tt>) already defined by CDAP. It takes a split reader and a <tt class="docutils literal"><span class="pre">RecordMaker</span></tt>
that transforms a key and value, as produced by the <tt class="docutils literal"><span class="pre">BatchReadable</span></tt>&#8216;s split reader,
into a record:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="nd">@Override</span>
<span class="kd">public</span> <span class="n">RecordScanner</span><span class="o">&lt;</span><span class="n">Entry</span><span class="o">&gt;</span> <span class="nf">createSplitRecordScanner</span><span class="o">(</span><span class="n">Split</span> <span class="n">split</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">Scannables</span><span class="o">.</span><span class="na">splitRecordScanner</span><span class="o">(</span>
    <span class="n">table</span><span class="o">.</span><span class="na">createSplitReader</span><span class="o">(</span><span class="n">split</span><span class="o">),</span>
    <span class="k">new</span> <span class="n">Scannables</span><span class="o">.</span><span class="na">RecordMaker</span><span class="o">&lt;</span><span class="kt">byte</span><span class="o">[],</span> <span class="n">Row</span><span class="o">,</span> <span class="n">Entry</span><span class="o">&gt;()</span> <span class="o">{</span>
      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="n">Entry</span> <span class="nf">makeRecord</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">key</span><span class="o">,</span> <span class="n">Row</span> <span class="n">row</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Entry</span><span class="o">(</span><span class="n">Bytes</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">key</span><span class="o">),</span> <span class="n">row</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="n">VALUE_COLUMN</span><span class="o">));</span>
      <span class="o">}</span>
    <span class="o">});</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Note there is an even simpler helper (<tt class="docutils literal"><span class="pre">Scannables.valueRecordScanner</span></tt>) that derives a split
record scanner from a split reader. For each key and value returned by the split reader it ignores the key
and returns the value. For example,
if your dataset implements <tt class="docutils literal"><span class="pre">BatchReadable&lt;String,</span> <span class="pre">Employee&gt;</span></tt>, then you can implement <tt class="docutils literal"><span class="pre">RecordScannable&lt;Employee&gt;</span></tt> by
defining:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="nd">@Override</span>
<span class="kd">public</span> <span class="n">RecordScanner</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span> <span class="nf">createSplitRecordScanner</span><span class="o">(</span><span class="n">Split</span> <span class="n">split</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">Scannables</span><span class="o">.</span><span class="na">valueRecordScanner</span><span class="o">(</span><span class="n">table</span><span class="o">.</span><span class="na">createSplitReader</span><span class="o">(</span><span class="n">split</span><span class="o">));</span>
<span class="o">}</span>
</pre></div>
</div>
<p>An example demonstrating an implementation of <tt class="docutils literal"><span class="pre">RecordScannable</span></tt> is included in the Cask Data Application Platform SDK in the
directory <tt class="docutils literal"><span class="pre">examples/Purchase</span></tt>, namely the <tt class="docutils literal"><span class="pre">PurchaseHistoryStore</span></tt>.</p>
</div>
<div class="section" id="writing-to-datasets-with-sql">
<h2>Writing to Datasets with SQL<a class="headerlink" href="#writing-to-datasets-with-sql" title="Permalink to this headline">¶</a></h2>
<p>Data can be inserted into Datasets using SQL. For example, you can write to a Dataset named
<tt class="docutils literal"><span class="pre">ProductCatalog</span></tt> with this SQL query:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">TABLE</span> <span class="n">cdap_user_productcatalog</span> <span class="n">SELECT</span> <span class="o">...</span>
</pre></div>
</div>
<p>In order for a Dataset to enable record insertion from SQL query, it simply has to expose a way to write records
into itself.</p>
<p>For CDAP Datasets, this is done by implementing the <tt class="docutils literal"><span class="pre">RecordWritable</span></tt> interface.
The system Dataset KeyValueTable already implements this and can be used to insert records from SQL queries.</p>
<p>Let&#8217;s take a closer look at the <tt class="docutils literal"><span class="pre">RecordWritable</span></tt> interface.</p>
<div class="section" id="id2">
<h3>Defining the Record Schema<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Just like in the <tt class="docutils literal"><span class="pre">RecordScannable</span></tt> interface, the record schema is given by returning the Java type of each record,
using the method:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">Type</span> <span class="nf">getRecordType</span><span class="o">();</span>
</pre></div>
</div>
<p><a class="reference internal" href="#sql-limitations"><em>The same rules</em></a> that apply to the type of the <tt class="docutils literal"><span class="pre">RecordScannable</span></tt> interface apply
to the type of the <tt class="docutils literal"><span class="pre">RecordWritable</span></tt> interface. In fact, if a Dataset implements both <tt class="docutils literal"><span class="pre">RecordScannable</span></tt> and
<tt class="docutils literal"><span class="pre">RecordWritable</span></tt> interfaces, they will have to use identical record types.</p>
</div>
<div class="section" id="writing-records">
<h3>Writing Records<a class="headerlink" href="#writing-records" title="Permalink to this headline">¶</a></h3>
<p>To enable inserting SQL query results, a Dataset needs to provide a means of writing a record into itself.
This is similar to how the <tt class="docutils literal"><span class="pre">BatchWritable</span></tt> interface makes Datasets writable from MapReduce jobs by providing
a way to write pairs of key and value. You need to implement the <tt class="docutils literal"><span class="pre">RecordWritable</span></tt> method:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">write</span><span class="o">(</span><span class="n">RECORD</span> <span class="n">record</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
</pre></div>
</div>
<p>Continuing the <em>MyDataset</em> <a class="reference internal" href="#sql-scanning-records"><em>example used above</em></a>, which showed an implementation of
<tt class="docutils literal"><span class="pre">RecordScannable</span></tt>, this example an implementation of a <tt class="docutils literal"><span class="pre">RecordWritable</span></tt> Dataset that is backed by a <tt class="docutils literal"><span class="pre">Table</span></tt>:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">class</span> <span class="nc">MyDataset</span> <span class="kd">implements</span> <span class="n">Dataset</span><span class="o">,</span> <span class="o">...,</span> <span class="n">RecordWritable</span><span class="o">&lt;</span><span class="n">Entry</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="n">Table</span> <span class="n">table</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">VALUE_COLUMN</span> <span class="o">=</span> <span class="o">{</span> <span class="sc">&#39;c&#39;</span> <span class="o">};</span>

  <span class="c1">// ..</span>
  <span class="c1">// All other Dataset methods</span>
  <span class="c1">// ...</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Type</span> <span class="nf">getRecordType</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Entry</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">write</span><span class="o">(</span><span class="n">Entry</span> <span class="n">record</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">table</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">Bytes</span><span class="o">.</span><span class="na">toBytes</span><span class="o">(</span><span class="n">record</span><span class="o">.</span><span class="na">getKey</span><span class="o">()),</span> <span class="n">VALUE_COLUMN</span><span class="o">,</span> <span class="n">Bytes</span><span class="o">.</span><span class="na">toBytes</span><span class="o">(</span><span class="n">record</span><span class="o">.</span><span class="na">getValue</span><span class="o">()));</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Note that a Dataset can implement either <tt class="docutils literal"><span class="pre">RecordScannable</span></tt>, <tt class="docutils literal"><span class="pre">RecordWritable</span></tt>, or both.</p>
</div>
</div>
<div class="section" id="connecting-to-cdap-datasets-using-cdap-jdbc-driver">
<h2>Connecting to CDAP Datasets using CDAP JDBC driver<a class="headerlink" href="#connecting-to-cdap-datasets-using-cdap-jdbc-driver" title="Permalink to this headline">¶</a></h2>
<p>CDAP provides a JDBC driver to make integrations with external programs and third-party BI (business intelligence)
tools easier.</p>
<p>The JDBC driver is a JAR that is bundled with the CDAP SDK. You can find it in the <tt class="docutils literal"><span class="pre">lib</span></tt>
directory of your SDK installation at <tt class="docutils literal"><span class="pre">lib/co.cask.cdap.cdap-explore-jdbc-&lt;version&gt;.jar</span></tt>.</p>
<p>If you don&#8217;t have a CDAP SDK and only want to connect to an existing instance of CDAP, you can download the CDAP JDBC
driver using this <a class="reference external" href="https://repository.continuuity.com/content/repositories/releases-public/co/cask/cdap/cdap-explore-jdbc/">link</a>.
Go to the directory matching the version of your running CDAP instance, and download the file named <tt class="docutils literal"><span class="pre">cdap-explore-jdbc-&lt;version&gt;.jar</span></tt>.</p>
<div class="section" id="using-the-cdap-jdbc-driver-in-your-java-code">
<h3>Using the CDAP JDBC driver in your Java code<a class="headerlink" href="#using-the-cdap-jdbc-driver-in-your-java-code" title="Permalink to this headline">¶</a></h3>
<p>To use CDAP JDBC driver in your code, place <tt class="docutils literal"><span class="pre">cdap-jdbc-driver.jar</span></tt> in the classpath of your application.
If you are using Maven, you can simply add a dependency in your file <tt class="docutils literal"><span class="pre">pom.xml</span></tt>:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">&lt;</span><span class="n">dependencies</span><span class="o">&gt;</span>
  <span class="o">...</span>
  <span class="o">&lt;</span><span class="n">dependency</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">co</span><span class="o">.</span><span class="na">cask</span><span class="o">.</span><span class="na">cdap</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">cdap</span><span class="o">-</span><span class="n">explore</span><span class="o">-</span><span class="n">jdbc</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;&lt;!--</span> <span class="n">Version</span> <span class="n">of</span> <span class="n">CDAP</span> <span class="n">you</span> <span class="n">want</span> <span class="n">the</span> <span class="n">JDBC</span> <span class="n">driver</span> <span class="n">to</span> <span class="n">query</span> <span class="o">--&gt;&lt;/</span><span class="n">version</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">dependency</span><span class="o">&gt;</span>
  <span class="o">...</span>
<span class="o">&lt;/</span><span class="n">dependencies</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Here is a snippet of Java code that uses the CDAP JDBC driver to connect to a running instance of CDAP,
and executes a query over CDAP Datasets:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="c1">// First, register the driver once in your application</span>
<span class="n">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">&quot;co.cask.cdap.explore.jdbc.ExploreDriver&quot;</span><span class="o">);</span>

<span class="c1">// If your CDAP instance requires a authentication token for connection,</span>
<span class="c1">// you have to specify it here.</span>
<span class="c1">// Replace &lt;cdap-host&gt; and &lt;authentication_token&gt; as appropriate to your installation.</span>
<span class="n">String</span> <span class="n">connectionUrl</span> <span class="o">=</span> <span class="s">&quot;jdbc:cdap://&lt;cdap-host&gt;:10000&quot;</span> <span class="o">+</span>
  <span class="s">&quot;?auth.token=&lt;authentication_token&gt;&quot;</span><span class="o">;</span>

<span class="c1">// Connect to CDAP instance</span>
<span class="n">Connection</span> <span class="n">connection</span> <span class="o">=</span> <span class="n">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="n">connectionUrl</span><span class="o">);</span>

<span class="c1">// Execute a query over CDAP Datasets and retrieve the results</span>
<span class="n">ResultSet</span> <span class="n">resultSet</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="s">&quot;select * from cdap_user_mydataset&quot;</span><span class="o">).</span><span class="na">executeQuery</span><span class="o">();</span>
<span class="o">...</span>
</pre></div>
</div>
<p>JDBC drivers are a standard in the Java ecosystem, with many <a class="reference external" href="http://docs.oracle.com/javase/tutorial/jdbc/">resources about them available</a>.</p>
</div>
</div>
<div class="section" id="accessing-cdap-datasets-through-business-intelligence-tools">
<h2>Accessing CDAP Datasets through Business Intelligence Tools<a class="headerlink" href="#accessing-cdap-datasets-through-business-intelligence-tools" title="Permalink to this headline">¶</a></h2>
<p>Most Business Intelligence tools can integrate with relational databases using JDBC drivers. They often include
drivers to connect to standard databases such as MySQL or PostgreSQL.
Most tools allow the addition of non-standard JDBC drivers.</p>
<p>We&#8217;ll look at two business intelligence tools — <em>SquirrelSQL</em> and <em>Pentaho Data Integration</em> —
and see how to connect them to a running CDAP instance and interact with CDAP Datasets.</p>
<div class="section" id="squirrelsql">
<h3>SquirrelSQL<a class="headerlink" href="#squirrelsql" title="Permalink to this headline">¶</a></h3>
<p><em>SquirrelSQL</em> is a simple JDBC client which executes SQL queries against many different relational databases.
Here&#8217;s how to add the CDAP JDBC driver inside <em>SquirrelSQL</em>.</p>
<ol class="arabic">
<li><p class="first">Open the <tt class="docutils literal"><span class="pre">Drivers</span></tt> pane, located on the far left corner of <em>SquirrelSQL</em>.</p>
</li>
<li><p class="first">Click the <tt class="docutils literal"><span class="pre">+</span></tt> icon of the <tt class="docutils literal"><span class="pre">Drivers</span></tt> pane.</p>
<a class="reference internal image-reference" href="../_images/squirrel_drivers.png"><img alt="../_images/squirrel_drivers.png" src="../_images/squirrel_drivers.png" style="width: 4in;" /></a>
</li>
<li><p class="first">Add a new Driver by entering a <tt class="docutils literal"><span class="pre">Name</span></tt>, such as <tt class="docutils literal"><span class="pre">CDAP</span> <span class="pre">Driver</span></tt>. The <tt class="docutils literal"><span class="pre">Example</span> <span class="pre">URL</span></tt> is of the form
<tt class="docutils literal"><span class="pre">jdbc:cdap://&lt;host&gt;:10000?auth.token=&lt;token&gt;</span></tt>. The <tt class="docutils literal"><span class="pre">Website</span> <span class="pre">URL</span></tt> can be left blank. In the <tt class="docutils literal"><span class="pre">Class</span> <span class="pre">Name</span></tt>
field, enter <tt class="docutils literal"><span class="pre">co.cask.cdap.explore.jdbc.ExploreDriver</span></tt>.
Click on the <tt class="docutils literal"><span class="pre">Extra</span> <span class="pre">Class</span> <span class="pre">Path</span></tt> tab, then on <tt class="docutils literal"><span class="pre">Add</span></tt>, and put the path to <tt class="docutils literal"><span class="pre">co.cask.cdap.cdap-explore-jdbc-&lt;version&gt;.jar</span></tt>.</p>
<a class="reference internal image-reference" href="../_images/squirrel_add_driver.png"><img alt="../_images/squirrel_add_driver.png" src="../_images/squirrel_add_driver.png" style="width: 6in;" /></a>
</li>
<li><p class="first">Click on <tt class="docutils literal"><span class="pre">OK</span></tt>. You should now see <tt class="docutils literal"><span class="pre">Cask</span> <span class="pre">CDAP</span> <span class="pre">Driver</span></tt> in the list of drivers from the <tt class="docutils literal"><span class="pre">Drivers</span></tt> pane of
<em>SquirrelSQL</em>.</p>
</li>
<li><p class="first">We can now create an alias to connect to a running instance of CDAP. Open the <tt class="docutils literal"><span class="pre">Aliases</span></tt> pane, and click on
the <tt class="docutils literal"><span class="pre">+</span></tt> icon to create a new alias.</p>
</li>
<li><p class="first">In this example, we are going to connect to a standalone CDAP from the SDK.
The name of our alias will be <tt class="docutils literal"><span class="pre">CDAP</span> <span class="pre">Standalone</span></tt>. Select the <tt class="docutils literal"><span class="pre">CDAP</span> <span class="pre">Driver</span></tt> in
the list of available drivers. Our URL will be <tt class="docutils literal"><span class="pre">jdbc:cdap://localhost:10000</span></tt>. Our standalone instance
does not require an authentication token, but if yours requires one, HTML-encode your token
and pass it as a parameter of the <tt class="docutils literal"><span class="pre">URL</span></tt>. <tt class="docutils literal"><span class="pre">User</span> <span class="pre">Name</span></tt> and <tt class="docutils literal"><span class="pre">Password</span></tt> are left blank.</p>
<a class="reference internal image-reference" href="../_images/squirrel_add_alias.png"><img alt="../_images/squirrel_add_alias.png" src="../_images/squirrel_add_alias.png" style="width: 6in;" /></a>
</li>
<li><p class="first">Click on <tt class="docutils literal"><span class="pre">OK</span></tt>. <tt class="docutils literal"><span class="pre">CDAP</span> <span class="pre">Standalone</span></tt> is now added to the list of aliases.</p>
</li>
<li><p class="first">A popup asks you to connect to your newly-added alias. Click on <tt class="docutils literal"><span class="pre">Connect</span></tt>, and <em>SquirrelSQL</em> will retrieve
information about your running CDAP Datasets.</p>
</li>
<li><p class="first">To execute a SQL query on your CDAP Datasets, go to the <tt class="docutils literal"><span class="pre">SQL</span></tt> tab, enter a query in the center field, and click
on the &#8220;running man&#8221; icon on top of the tab. Your results will show in the bottom half of the <em>SquirrelSQL</em> main view.</p>
<a class="reference internal image-reference" href="../_images/squirrel_sql_query.png"><img alt="../_images/squirrel_sql_query.png" src="../_images/squirrel_sql_query.png" style="width: 6in;" /></a>
</li>
</ol>
</div>
<div class="section" id="pentaho-data-integration">
<h3>Pentaho Data Integration<a class="headerlink" href="#pentaho-data-integration" title="Permalink to this headline">¶</a></h3>
<p><em>Pentaho Data Integration</em> is an advanced, open source business intelligence tool that can execute
transformations of data coming from various sources. Let&#8217;s see how to connect it to
CDAP Datasets using the CDAP JDBC driver.</p>
<ol class="arabic">
<li><p class="first">Before opening the <em>Pentaho Data Integration</em> application, copy the <tt class="docutils literal"><span class="pre">co.cask.cdap.cdap-explore-jdbc-&lt;version&gt;.jar</span></tt>
file to the <tt class="docutils literal"><span class="pre">lib</span></tt> directory of <em>Pentaho Data Integration</em>, located at the root of the application&#8217;s directory.</p>
</li>
<li><p class="first">Open <em>Pentaho Data Integration</em>.</p>
</li>
<li><p class="first">In the toolbar, select <tt class="docutils literal"><span class="pre">File</span> <span class="pre">-&gt;</span> <span class="pre">New</span> <span class="pre">-&gt;</span> <span class="pre">Database</span> <span class="pre">Connection...</span></tt>.</p>
</li>
<li><p class="first">In the <tt class="docutils literal"><span class="pre">General</span></tt> section, select a <tt class="docutils literal"><span class="pre">Connection</span> <span class="pre">Name</span></tt>, like <tt class="docutils literal"><span class="pre">CDAP</span> <span class="pre">Standalone</span></tt>. For the <tt class="docutils literal"><span class="pre">Connection</span> <span class="pre">Type</span></tt>, select
<tt class="docutils literal"><span class="pre">Generic</span> <span class="pre">database</span></tt>. Select <tt class="docutils literal"><span class="pre">Native</span> <span class="pre">(JDBC)</span></tt> for the <tt class="docutils literal"><span class="pre">Access</span></tt> field. In this example, where we connect to
a standalone instance of CDAP, our <tt class="docutils literal"><span class="pre">Custom</span> <span class="pre">Connection</span> <span class="pre">URL</span></tt> will then be <tt class="docutils literal"><span class="pre">jdbc:cdap://localhost:10000</span></tt>.
In the field <tt class="docutils literal"><span class="pre">Custom</span> <span class="pre">Driver</span> <span class="pre">Class</span> <span class="pre">Name</span></tt>, enter <tt class="docutils literal"><span class="pre">co.cask.cdap.explore.jdbc.ExploreDriver</span></tt>.</p>
<a class="reference internal image-reference" href="../_images/pentaho_add_connection.png"><img alt="../_images/pentaho_add_connection.png" src="../_images/pentaho_add_connection.png" style="width: 6in;" /></a>
</li>
<li><p class="first">Click on <tt class="docutils literal"><span class="pre">OK</span></tt>.</p>
</li>
<li><p class="first">To use this connection, navigate to the <tt class="docutils literal"><span class="pre">Design</span></tt> tab on the left of the main view. In the <tt class="docutils literal"><span class="pre">Input</span></tt> menu,
double click on <tt class="docutils literal"><span class="pre">Table</span> <span class="pre">input</span></tt>. It will create a new transformation containing this input.</p>
<a class="reference internal image-reference" href="../_images/pentaho_table_input.png"><img alt="../_images/pentaho_table_input.png" src="../_images/pentaho_table_input.png" style="width: 6in;" /></a>
</li>
<li><p class="first">Right-click on <tt class="docutils literal"><span class="pre">Table</span> <span class="pre">input</span></tt> in your transformation and select <tt class="docutils literal"><span class="pre">Edit</span> <span class="pre">step</span></tt>. You can specify an appropriate name
for this input such as <tt class="docutils literal"><span class="pre">CDAP</span> <span class="pre">Datasets</span> <span class="pre">query</span></tt>. Under <tt class="docutils literal"><span class="pre">Connection</span></tt>, select the newly created database connection;
in this example, <tt class="docutils literal"><span class="pre">CDAP</span> <span class="pre">Standalone</span></tt>. Enter a valid SQL query in the main <tt class="docutils literal"><span class="pre">SQL</span></tt> field. This will define the data
available to your transformation.</p>
<a class="reference internal image-reference" href="../_images/pentaho_modify_input.png"><img alt="../_images/pentaho_modify_input.png" src="../_images/pentaho_modify_input.png" style="width: 6in;" /></a>
</li>
<li><p class="first">Click on <tt class="docutils literal"><span class="pre">OK</span></tt>. Your input is now ready to be used in your transformation, and it will contain data coming
from the results of the SQL query on the CDAP Datasets.</p>
</li>
<li><p class="first">For more information on how to add components to a transformation and link them together, see the
<a class="reference external" href="http://community.pentaho.com/projects/data-integration/">Pentaho Data Integration page</a>.</p>
</li>
</ol>
</div>
</div>
<div class="section" id="formulating-queries">
<h2>Formulating Queries<a class="headerlink" href="#formulating-queries" title="Permalink to this headline">¶</a></h2>
<p>When creating your queries, keep these limitations in mind:</p>
<ul class="simple">
<li>The query syntax of CDAP is a subset of the variant of SQL that was first defined by Apache Hive.</li>
<li>The SQL commands <tt class="docutils literal"><span class="pre">UPDATE</span></tt> and <tt class="docutils literal"><span class="pre">DELETE</span></tt> are not allowed on CDAP Datasets.</li>
<li>When addressing your datasets in queries, you need to prefix the data set name with the CDAP
namespace <tt class="docutils literal"><span class="pre">cdap_user_</span></tt>. For example, if your Dataset is named <tt class="docutils literal"><span class="pre">ProductCatalog</span></tt>, then the corresponding table
name is <tt class="docutils literal"><span class="pre">cdap_user_productcatalog</span></tt>. Note that the table name is lower-case.</li>
</ul>
<p>For more examples of queries, please refer to the <a class="reference external" href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DML#LanguageManualDML-InsertingdataintoHiveTablesfromqueries">Hive language manual</a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div role="note" aria-label="manuals links">
    <h3>CDAP Documentation</h3>
    <ul class="this-page-menu">
      <li><b><a href="../table-of-contents/../../developers-manual/index.html"
            rel="nofollow">Developers’ Manual</a></b></li>
      <li><a href="../table-of-contents/../../reference-manual/index.html"
            rel="nofollow">Reference Manual</a></li>
      <li><a href="../table-of-contents/../../admin-manual/index.html"
            rel="nofollow">Administration Manual</a></li>
      <li><a href="../table-of-contents/../../examples-manual/index.html"
            rel="nofollow">Examples, Guides, and Tutorials</a></li>
      <li><a href="../table-of-contents/../../reference-manual/release-notes.html"
            rel="nofollow">Release Notes</a></li>
      <li><a href="../table-of-contents/../../reference-manual/glossary.html"
            rel="nofollow">Glossary</a></li>
      <li><a href="../table-of-contents/../../reference-manual/faq.html"
            rel="nofollow">FAQ</a></li>
    </ul>
   </div><!--
  Copyright © 2014 Cask Data, Inc.

  Licensed under the Apache License, Version 2.0 (the "License"); you may not
  use this file except in compliance with the License. You may obtain a copy of
  the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  License for the specific language governing permissions and limitations under
  the License.
-->

<h3 class="pagenavtitle"><a href="../table-of-contents.html">Developers’ Manual: Table&nbsp;of&nbsp;Contents</a></h3>
<nav class="pagenav">
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html"> Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/index.html"> Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html"> Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../building-blocks/index.html"> Building Blocks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/index.html"> Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/index.html"> Testing and Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ingesting-tools/index.html"> Ingesting Data</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html"> Advanced Topics</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href=""> Data Exploration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#defining-the-record-schema">Defining the Record Schema</a></li>
<li class="toctree-l3"><a class="reference internal" href="#limitations">Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parameterized-types">Parameterized Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#complex-types">Complex Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scanning-records">Scanning Records</a></li>
<li class="toctree-l3"><a class="reference internal" href="#writing-to-datasets-with-sql">Writing to Datasets with SQL</a></li>
<li class="toctree-l3"><a class="reference internal" href="#connecting-to-cdap-datasets-using-cdap-jdbc-driver">Connecting to CDAP Datasets using CDAP JDBC driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="#accessing-cdap-datasets-through-business-intelligence-tools">Accessing CDAP Datasets through Business Intelligence Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="#formulating-queries">Formulating Queries</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="best-practices.html"> Best Practices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html"> Troubleshooting</a></li>
</ul>

</nav>
  <h4>Previous Topic</h4>
  <p class="topless"><a href="index.html"
                        title="Previous Chapter">Advanced Topics</a></p>
  <h4>Next Topic</h4>
  <p class="topless"><a href="best-practices.html"
                        title="Next Chapter">Best Practices for Developing Applications</a></p>
  <div role="note" aria-label="downloads links">
    <h3>Downloads</h3>
    <ul class="this-page-menu">
      <li><a href="http://docs.cask.co/cdap/2.5.2/cdap-docs-2.5.2-web.zip"
            rel="nofollow">Zip Archive of CDAP Documentation</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick Search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">

<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;margin:0px auto;}
.tg td{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg th{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg .tg-s6z2{text-align:center;}
.tg .tg-0ord{text-align:right;}
.tg a{font-weight:bold;}
</style>
<table class="tg" width= 100%>
  <tr>
    <th class="tg-031e">Previous Topic: 
    <a title="Advanced Topics" href="index.html" />Advanced Topics</a>&nbsp;&nbsp;
    
    </th>
    <th class="tg-s6z2">
        &copy; Copyright 2014 Cask Data, Inc.
    
    </th>
    <th class="tg-0ord">&nbsp;&nbsp;Next Topic:
    <a title="Best Practices for Developing Applications" href="best-practices.html" />Best Practices for Developing Applications</a>
    
    </th>
  </tr>
</table>

    </div>
  </body>
</html>